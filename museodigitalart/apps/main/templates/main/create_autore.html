<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inserisci Autore</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/bootstrap/bootstrap.min.css' %}">
    <script src="{% static 'js/bootstrap/bootstrap.bundle.min.js' %}"></script>
    
    <style>
        form {
            max-width: 600px;
            margin: auto;
        }
        label, input {
            display: block;
            width: 100%;
            margin: 10px 0;
        }
        button {
            display: block;
            width: 100%;
            padding: 10px;
            background-color: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
        }
        button:hover {
            background-color: #45a049;
        }
    </style>
</head>
<body>
    <h2>Inserisci Autore</h2>
    <form id="inserisciAutoreForm" method="post" onsubmit="return mostraConferma()">
        {% csrf_token %}
        <label for="codice">Codice</label>
        <input type="text" id="codice" name="codice" required>
        
        <label for="nome">Nome</label>
        <input type="text" id="nome" name="nome" required>
        
        <label for="cognome">Cognome</label>
        <input type="text" id="cognome" name="cognome" required>
        
        <label for="nazione">Nazione</label>
        <input type="text" id="nazione" name="nazione" required>
        
        <label for="dataNascita">Data Nascita</label>
        <input type="text" id="dataNascita" name="dataNascita" required>
        
        <label for="dataMorte">Data Morte</label>
        <input type="text" id="dataMorte" name="dataMorte">
        
        <label for="tipo">Tipo</label>
        <input type="text" id="tipo" name="tipo" required>
        
        <input type="hidden" id="numeroOpere" name="numeroOpere" value="0">
        
        <button type="submit" class="btn btn-primary">Inserisci</button>
        <a href="{% url 'main/autore' %}" class="btn btn-secondary mt-2">Indietro</a>
    </form>
    
    <!-- Modal di conferma -->
    <div class="modal fade" id="confermaModal" tabindex="-1" role="dialog" aria-labelledby="confermaModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="confermaModalLabel">Conferma Inserimento</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    Sei sicuro di voler inserire questo autore?
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Annulla</button>
                    <button type="button" class="btn btn-primary" onclick="confermaInserimento()">Conferma</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        function mostraConferma() {
            $('#confermaModal').modal('show');
            return false; // Previene l'invio del form finch√© l'utente non conferma
        }

        function confermaInserimento() {
            $('#inserisciAutoreForm').off('submit').submit(); // Rimuove il gestore di submit e invia il form
        }
    </script>
</body>
</html>
